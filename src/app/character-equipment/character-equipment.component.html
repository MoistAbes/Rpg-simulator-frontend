<div class="container inventory" (mousemove)="onMouseMove($event)">

  <h3>Equipment</h3>
  <div class="row">
    <div class="col-3 col-md-2 col-lg-1 mb-3" *ngFor="let slot of character?.equipment; let i = index">
      <p>{{slot.slot}}</p>
      <div class="square"
           *ngIf="slot.item"
           (dragover)="onDragOver($event)"
           (dragstart)="onEquipmentDragStart($event, slot, i)"
           (drop)="onDropEquipment($event, slot, i)"
           draggable="true"
           (mouseenter)="showEquipmentItemDetails(slot)"
           (mouseleave)="hideEquipmentItemDetails()">

        <div class="square-content">
          <img ngSrc="{{slot.item.icon}}" alt="{{ slot.item.name }}" class="item-icon" fill>

        </div>
      </div>
      <div class="square empty-slot" *ngIf="!slot.item"
           (dragover)="onDragOver($event)"
           (drop)="onDropEquipment($event, slot, i)">
        <!-- Empty slot, no item -->
      </div>
    </div>

  </div>

 <h1>Inventory</h1>
  <div class="row">
    <div *ngFor="let inventoryItem of character?.inventory; let i = index" class="col-3 col-md-2 col-lg-1 mb-3">
      <div class="square" *ngIf="inventoryItem.item"
           (mouseenter)="showDetails(inventoryItem)"
           (mouseleave)="hideDetails()"
           draggable="true"
           (dragstart)="onItemDragStart($event, inventoryItem, i)"
           (dragover)="onDragOver($event)"
           (drop)="onItemDrop($event, i)"
      >
        <div class="square-content">
          <img ngSrc="{{inventoryItem.item.icon}}" alt="{{ inventoryItem.item.name }}" class="item-icon" fill>
          <p *ngIf="inventoryItem.quantity">{{ inventoryItem.quantity }}</p>
        </div>
      </div>
      <div class="square empty-slot" *ngIf="!inventoryItem.item"
           (dragover)="onDragOver($event)"
           (drop)="onItemDrop($event, i)">
        <!-- Empty slot, no item -->
      </div>
    </div>
  </div>

  <!-- External div for displaying item details -->
  <div class="item-details-external" *ngIf="hoveredItem?.item" [ngStyle]="{'top.px': mouseY, 'left.px': mouseX}">
    <p>Name: {{ hoveredItem?.item?.name }}</p>
    <p>Description: {{ hoveredItem?.item?.description }}</p>
    <p>Type: {{ hoveredItem?.item?.type }}</p>
    <p *ngIf="hoveredItem?.item?.weapon">Damage: {{ hoveredItem?.item?.weapon?.damage }}</p>
    <p *ngIf="hoveredItem?.item?.armor">Defense: {{ hoveredItem?.item?.armor?.defense }}</p>
    <p>Rarity: {{ hoveredItem?.item?.rarity }}</p>
    <p>Value: {{ hoveredItem?.item?.value }}</p>
  </div>


  <div class="item-details-external" *ngIf="hoveredEquipmentItem?.item" [ngStyle]="{'top.px': mouseY, 'left.px': mouseX}">
    <p>Name: {{ hoveredEquipmentItem?.item?.name }}</p>
    <p>Description: {{ hoveredEquipmentItem?.item?.description }}</p>
    <p>Type: {{ hoveredEquipmentItem?.item?.type }}</p>
    <p *ngIf="hoveredEquipmentItem?.item?.weapon">Damage: {{ hoveredEquipmentItem?.item?.weapon?.damage }}</p>
    <p *ngIf="hoveredEquipmentItem?.item?.armor">Defense: {{ hoveredEquipmentItem?.item?.armor?.defense }}</p>
    <p>Rarity: {{ hoveredEquipmentItem?.item?.rarity }}</p>
    <p>Value: {{ hoveredEquipmentItem?.item?.value }}</p>
  </div>
</div>
